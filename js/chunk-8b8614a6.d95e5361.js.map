{"version":3,"sources":["webpack:///./src/views/front/product/components/ProductsList.vue?50c3","webpack:///./src/views/front/product/Index.vue","webpack:///./src/views/front/product/components/ProductsList.vue","webpack:///./src/views/front/product/components/ProductsList.vue?21f6","webpack:///./src/views/front/product/Index.vue?c200","webpack:///./src/api/product.js","webpack:///./src/api/constants.js"],"names":["class","_createVNode","_component_GoBanner","title","_createElementVNode","_component_GoBread","_component_GoBreadItem","to","_component_ProductsList","_component_GoSubscribe","style","_createElementBlock","href","active","$setup","onClick","_Fragment","_renderList","cate","key","_hoisted_5","_component_Loading","is-full-page","item","id","data-aos","data-aos-duration","imageUrl","_ctx","push","_toDisplayString","category","origin_price","price","type","_hoisted_19","disabled","_hoisted_22","pages","total_pages","_createBlock","_component_GoPagination","onChangePage","name","setup","productList","ref","isLoading","getProducts","value","getProductsAll","data","products","filter","filterChanger","currentCate","currentPage","window","scrollTo","top","behavior","filterProducts","watchEffect","useFilterCategory","newProducts","usePagination","pagination","filterList","computed","slice","current_page","changePager","page","isLoadingItem","store","useStore","addToCart","dispatch","count","then","Message","text","router","useRouter","watch","immediate","categoryList","productCategory","__exports__","components","ProductsList","render","path","process","getProductById","request","getAdminProducts","uploadProduct","product","editProduct","deleteProduct"],"mappings":"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","file":"js/chunk-8b8614a6.d95e5361.js","sourcesContent":["export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./ProductsList.vue?vue&type=style&index=0&id=650c5a57&lang=scss&scoped=true\"","<template>\r\n  <GoBanner title=\"shop\">線上商城</GoBanner>\r\n  <div class=\"container\">\r\n    <!-- 麵包屑 -->\r\n    <GoBread>\r\n      <GoBreadItem to=\"/\">首頁</GoBreadItem>\r\n      <GoBreadItem>線上商城</GoBreadItem>\r\n    </GoBread>\r\n    <!-- 產品列表 -->\r\n    <ProductsList />\r\n  </div>\r\n  <GoSubscribe />\r\n</template>\r\n\r\n<script>\r\nimport ProductsList from './components/ProductsList.vue'\r\nexport default {\r\n  name: 'ProductsPage',\r\n  components: { ProductsList }\r\n}\r\n</script>\r\n","<template>\r\n  <div class=\"row\">\r\n    <!-- 左側分類欄 -->\r\n    <div class=\"col-md-3 mb-2\">\r\n      <div class=\"scroll-content\" style=\"position: sticky; top: 80px\">\r\n        <ul class=\"category-panel list-group list-unstyled text-center mt-2\">\r\n          <li>\r\n            <a\r\n              href=\"#\"\r\n              class=\"list-group-item list-group-item-action\"\r\n              :class=\"{ active: filter === 'all' }\"\r\n              @click.prevent=\"filterChanger('all')\"\r\n            >\r\n              全部\r\n            </a>\r\n          </li>\r\n          <li v-for=\"cate in categoryList\" :key=\"cate\">\r\n            <a\r\n              href=\"#\"\r\n              class=\"list-group-item list-group-item-action\"\r\n              :class=\"{ active: filter === cate }\"\r\n              @click.prevent=\"filterChanger(cate)\"\r\n            >\r\n              {{ cate }}\r\n            </a>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n    <!-- 右側產品列表 -->\r\n    <div class=\"col-md-9 position-relative\">\r\n      <!-- Loading 元件 -->\r\n      <Loading :active=\"isLoading\" :is-full-page=\"false\" />\r\n      <div class=\"row\" v-if=\"productList\">\r\n        <div\r\n          class=\"col-lg-4 col-md-6 mb-3\"\r\n          v-for=\"item in filterList\"\r\n          :key=\"item.id\"\r\n          data-aos=\"fade-up\"\r\n          data-aos-duration=\"1000\"\r\n        >\r\n          <div class=\"card h-100 position-relative product-card\">\r\n            <div class=\"product-card-imgbox\">\r\n              <div\r\n                class=\"picture\"\r\n                :style=\"`background-image: url(${item.imageUrl})`\"\r\n                @click=\"$router.push(`/product/${item.id}`)\"\r\n              />\r\n            </div>\r\n            <div class=\"card-body\">\r\n              <div class=\"d-flex justify-content-between\">\r\n                <h5 class=\"card-title ellipsis\">\r\n                  {{ item.title }}\r\n                </h5>\r\n                <div>\r\n                  <div class=\"badge rounded-pill bg-secondary h5\">\r\n                    {{ item.category }}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"d-flex justify-content-between\">\r\n                <template v-if=\"item.origin_price === item.price\">\r\n                  <span class=\"h5 ms-auto\"\r\n                    >原價： {{ $currency(item.origin_price) }} 元</span\r\n                  >\r\n                </template>\r\n                <template v-else>\r\n                  <del>原價： {{ $currency(item.origin_price) }} 元</del>\r\n                  <span class=\"h5 ms-auto red\"\r\n                    >特價： {{ $currency(item.price) }} 元</span\r\n                  >\r\n                </template>\r\n              </div>\r\n              <div class=\"d-flex justify-content-between mt-2\">\r\n                <button\r\n                  class=\"col-5 btn btn-outline-primary me-3\"\r\n                  type=\"button\"\r\n                  @click=\"$router.push(`/product/${item.id}`)\"\r\n                >\r\n                  查看\r\n                </button>\r\n                <button\r\n                  class=\"col-5 btn btn-primary d-flex align-items-center justify-content-center\"\r\n                  :disabled=\"isLoadingItem === item.id\"\r\n                  type=\"button\"\r\n                  @click=\"addToCart(item.id)\"\r\n                >\r\n                  <span\r\n                    v-show=\"isLoadingItem === item.id\"\r\n                    class=\"spinner-grow spinner-grow-sm\"\r\n                  ></span>\r\n                  <i class=\"material-icons-round\"> add_shopping_cart </i>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <GoPagination\r\n        v-if=\"pages?.total_pages > 1\"\r\n        :pages=\"pages\"\r\n        @change-page=\"changePager\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed, ref, watchEffect, watch } from 'vue'\r\nimport { productCategory } from '@/api/constants'\r\nimport { getProductsAll } from '@/api/product'\r\nimport { useFilterCategory, usePagination } from '@/hooks'\r\nimport { useStore } from 'vuex'\r\nimport Message from '@/components/library/Message'\r\nimport { useRouter } from 'vue-router'\r\n\r\nexport default {\r\n  name: 'ProductsList',\r\n  setup() {\r\n    // 取得產品列表\r\n    const productList = ref(null)\r\n    const isLoading = ref(true)\r\n    const getProducts = async () => {\r\n      isLoading.value = true\r\n      const data = await getProductsAll()\r\n      productList.value = data.products\r\n      isLoading.value = false\r\n    }\r\n    getProducts()\r\n\r\n    // filter: 當前選中之分類, 預設為 all\r\n    const filter = ref('all')\r\n    const filterChanger = (currentCate) => {\r\n      filter.value = currentCate\r\n      currentPage.value = 1\r\n      window.scrollTo({ top: 0, behavior: 'smooth' })\r\n    }\r\n\r\n    // --- 對產品列表進行處理, 返回一個過濾後的列表 ---\r\n    const currentPage = ref(1)\r\n    const filterProducts = ref(null)\r\n    const pages = ref(null)\r\n\r\n    watchEffect(() => {\r\n      // 產品列表\r\n      const { newProducts } = useFilterCategory(filter.value, productList.value)\r\n      filterProducts.value = newProducts.value\r\n      // 分頁資料\r\n      const { pagination } = usePagination(\r\n        currentPage.value,\r\n        filterProducts.value\r\n      )\r\n      pages.value = pagination\r\n    })\r\n    // 用計算屬性計算出當前頁碼顯示的產品列表\r\n    const filterList = computed(() => {\r\n      return filterProducts?.value.slice(\r\n        (pages.value.current_page - 1) * 9,\r\n        pages.value.current_page * 9\r\n      )\r\n    })\r\n\r\n    const changePager = (page) => {\r\n      currentPage.value = page\r\n    }\r\n    // ---------------------------------------------\r\n\r\n    // 加入購物車功能\r\n    const isLoadingItem = ref('')\r\n    const store = useStore()\r\n    const addToCart = (id) => {\r\n      isLoadingItem.value = id\r\n      store.dispatch('cart/addToCart', { id, count: 1 }).then(() => {\r\n        isLoadingItem.value = ''\r\n        Message({ type: 'success', text: '已成功加入購物車! ' })\r\n      })\r\n    }\r\n\r\n    // 在路由後面新增當前 category 參數\r\n    const router = useRouter()\r\n    watch(\r\n      filter,\r\n      () => {\r\n        router.push(`/products?category=${filter.value}`)\r\n      },\r\n      { immediate: true }\r\n    )\r\n\r\n    return {\r\n      categoryList: productCategory,\r\n      productList,\r\n      filter,\r\n      filterChanger,\r\n      isLoading,\r\n      filterList,\r\n      pages,\r\n      changePager,\r\n      addToCart,\r\n      isLoadingItem\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n// 產品卡片\r\n.product-card {\r\n  &-imgbox {\r\n    overflow: hidden;\r\n  }\r\n  .picture {\r\n    background-size: cover;\r\n    background-position: center center;\r\n    height: 250px;\r\n    transition: transform 0.5s;\r\n    // hover 遮罩\r\n    &:hover {\r\n      position: relative;\r\n      transform: scale(1.25);\r\n      cursor: pointer;\r\n      &:before {\r\n        content: '';\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        right: 0;\r\n        bottom: 0;\r\n        background-color: rgba(0, 0, 0, 0.3);\r\n      }\r\n      &:after {\r\n        content: '查看詳情';\r\n        position: absolute;\r\n        top: 50%;\r\n        left: 50%;\r\n        transform: translate(-50%, -50%);\r\n        color: #fff;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.red {\r\n  color: #cf4444;\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n}\r\n</style>\r\n","import { render } from \"./ProductsList.vue?vue&type=template&id=650c5a57&scoped=true\"\nimport script from \"./ProductsList.vue?vue&type=script&lang=js\"\nexport * from \"./ProductsList.vue?vue&type=script&lang=js\"\n\nimport \"./ProductsList.vue?vue&type=style&index=0&id=650c5a57&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\小羊\\\\Desktop\\\\igo-shop\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-650c5a57\"]])\n\nexport default __exports__","import { render } from \"./Index.vue?vue&type=template&id=3112b0fa\"\nimport script from \"./Index.vue?vue&type=script&lang=js\"\nexport * from \"./Index.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\小羊\\\\Desktop\\\\igo-shop\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import request from '@/utils/request'\r\nconst path = `${process.env.VUE_APP_PATH}`\r\n\r\n// 前台 API\r\n/**\r\n * 取得產品列表\r\n * @param {Number} page - 當前頁碼\r\n * @returns Promise\r\n */\r\nexport const getProducts = (page = 1) => {\r\n  return request(`/api/${path}/products?page=${page}`, 'get')\r\n}\r\n\r\n/**\r\n * 根據id獲取產品的詳情\r\n * @param {String} id - 產品id\r\n * @returns Promise\r\n */\r\nexport const getProductById = (id) => {\r\n  return request(`/api/${path}/product/${id}`, 'get')\r\n}\r\n\r\n/**\r\n * 取得所有的產品\r\n * @returns Promise\r\n */\r\nexport const getProductsAll = () => {\r\n  return request(`/api/${path}/products/all`, 'get')\r\n}\r\n\r\n// 後台 API\r\n/**\r\n * 取得後台產品列表\r\n * @param {Number} page - 當前頁碼\r\n * @returns Promise\r\n */\r\nexport const getAdminProducts = (page = 1, category = '') => {\r\n  return request(`/api/${path}/admin/products?page=${page}`, 'get', { category })\r\n}\r\n\r\n/**\r\n * 新增一個產品\r\n * @param {Object} product - 要新增的產品資料\r\n * @returns Promise\r\n */\r\nexport const uploadProduct = (product) => {\r\n  return request(`/api/${path}/admin/product`, 'post', { data: product })\r\n}\r\n\r\n/**\r\n * 修改一個產品\r\n * @param {String} id - 要修改產品的ID\r\n * @param {Object} product - 要修改的產品\r\n * @returns Promise\r\n */\r\nexport const editProduct = (id, product) => {\r\n  return request(`/api/${path}/admin/product/${id}`, 'put', { data: product })\r\n}\r\n\r\n/**\r\n * 刪除一個產品\r\n * @param {String} id - 要刪除的產品ID\r\n * @returns Promise\r\n */\r\nexport const deleteProduct = (id) => {\r\n  return request(`/api/${path}/admin/product/${id}`, 'delete')\r\n}\r\n","// 專案中的常量資料\r\n\r\n// 產品類別\r\nexport const productCategory = [\r\n  '圍棋子',\r\n  '圍棋罐',\r\n  '圍棋盤 / 棋墩',\r\n  '其他'\r\n]\r\n"],"sourceRoot":""}