{"version":3,"sources":["webpack:///./src/views/front/pay/PayOrder.vue?4839","webpack:///./src/views/front/pay/components/PayStep.vue","webpack:///./src/views/front/pay/components/PayStep.vue?a434","webpack:///./src/views/front/pay/PayOrder.vue","webpack:///./src/views/front/pay/PayOrder.vue?aa96","webpack:///./src/api/order.js"],"names":["class","_createElementBlock","_createVNode","_component_GoSteps","active","$props","_component_GoStepsItem","title","name","props","activeIndex","type","Number","default","__exports__","render","style","_createElementVNode","_component_GoBanner","_component_PayStep","_component_Loading","$setup","is-full-page","_hoisted_5","_Fragment","_renderList","products","item","key","id","product","imageUrl","_toDisplayString","qty","_ctx","total","Math","round","_hoisted_16","_hoisted_19","user","_hoisted_21","email","_hoisted_23","tel","_hoisted_25","address","_hoisted_27","message","_hoisted_29","is_paid","_hoisted_33","payment_method","onClick","components","PayStep","setup","isLoading","ref","route","useRoute","order","getOrderById","params","then","data","value","router","useRouter","handlerPayment","payOrder","push","path","process","createOrder","request","orderId","getOrdersList","page","updateOrder","deleteOrder","clearOrder"],"mappings":"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","file":"js/chunk-3e6f991f.13dffc4b.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./PayOrder.vue?vue&type=style&index=0&id=26688299&lang=scss&scoped=true\"","<template>\r\n  <div class=\"pay-step p-3\">\r\n    <GoSteps :active=\"activeIndex\">\r\n      <GoStepsItem title=\"確認訂單\" />\r\n      <GoStepsItem title=\"進行付款\" />\r\n      <GoStepsItem title=\"完成購買\" />\r\n    </GoSteps>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'PayStep',\r\n  props: {\r\n    activeIndex: {\r\n      type: Number,\r\n      default: 1\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./PayStep.vue?vue&type=template&id=518b0f34\"\nimport script from \"./PayStep.vue?vue&type=script&lang=js\"\nexport * from \"./PayStep.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\小羊\\\\Desktop\\\\igo-shop\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <GoBanner title=\"shop\">結帳流程</GoBanner>\r\n  <div class=\"container mt-3\">\r\n    <!-- 進度 -->\r\n    <PayStep :activeIndex=\"2\" />\r\n    <div\r\n      class=\"row g-0 bg-white rounded justify-content-between flex-md-row-reverse p-3 mt-4 mb-4 shadow-sm\"\r\n      style=\"position: relative; min-height: 50vh\"\r\n    >\r\n      <!-- loading 元件 -->\r\n      <Loading :active=\"isLoading\" :is-full-page=\"false\" />\r\n      <!-- 購買明細 -->\r\n      <div class=\"col-md-6 col-lg-5 px-3 mt-3\" v-if=\"order\">\r\n        <h2 class=\"h2 mb-3\">購買明細</h2>\r\n        <ul class=\"list-unstyled\">\r\n          <li\r\n            class=\"d-flex align-items-center mb-4\"\r\n            v-for=\"item in order.products\"\r\n            :key=\"item.id\"\r\n          >\r\n            <div\r\n              class=\"bg-img\"\r\n              :style=\"{\r\n                'background-image': `url(${item.product.imageUrl})`\r\n              }\"\r\n            ></div>\r\n            <div class=\"col px-3 d-flex\">\r\n              <div class=\"col-7 pe-2\">\r\n                <p class=\"ellipsis m-0\">{{ item.product.title }}</p>\r\n                <small class=\"text-muted\">數量：{{ item.qty }}</small>\r\n              </div>\r\n              <div class=\"col-5 ls-1 text-end\">\r\n                NT$ {{ $currency(item.total) }}\r\n              </div>\r\n            </div>\r\n          </li>\r\n        </ul>\r\n        <div class=\"text-end\">\r\n          總金額：NT$\r\n          <span class=\"fs-4\">{{ $currency(Math.round(order.total)) }}</span>\r\n        </div>\r\n      </div>\r\n      <!-- 訂購人資料 -->\r\n      <div class=\"col-md-6 p-3\" v-if=\"order\">\r\n        <h2 class=\"h2\">購買人資訊</h2>\r\n        <ul class=\"list-unstyled\">\r\n          <li class=\"list-group-item\">\r\n            <small>購買人姓名</small>\r\n            <p>{{ order.user.name }}</p>\r\n          </li>\r\n          <li class=\"list-group-item\">\r\n            <small>Email</small>\r\n            <p>{{ order.user.email }}</p>\r\n          </li>\r\n          <li class=\"list-group-item\">\r\n            <small>連絡電話</small>\r\n            <p>{{ order.user.tel }}</p>\r\n          </li>\r\n          <li class=\"list-group-item\">\r\n            <small>收件地址</small>\r\n            <p>{{ order.user.address }}</p>\r\n          </li>\r\n          <li class=\"list-group-item\">\r\n            <small>備註</small>\r\n            <p>{{ order.message }}</p>\r\n          </li>\r\n          <li class=\"list-group-item\">\r\n            <small>付款狀態</small>\r\n            <p v-if=\"order.is_paid\" class=\"text-success\">已付款</p>\r\n            <p v-else class=\"text-danger\">尚未付款</p>\r\n          </li>\r\n          <li class=\"list-group-item\">\r\n            <small>支付方式</small>\r\n            <div class=\"d-flex justify-content-between\">\r\n              <p>{{ order.user.payment_method }}</p>\r\n              <button\r\n                @click=\"handlerPayment\"\r\n                type=\"button\"\r\n                class=\"btn btn-primary\"\r\n              >\r\n                前往付款\r\n              </button>\r\n            </div>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from 'vue'\r\nimport PayStep from './components/PayStep.vue'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport { getOrderById, payOrder } from '@/api/order'\r\nexport default {\r\n  name: 'PayOrder',\r\n  components: { PayStep },\r\n  setup() {\r\n    const isLoading = ref(true)\r\n\r\n    // 獲取訂單資料\r\n    const route = useRoute()\r\n    const order = ref(null)\r\n    getOrderById(route.params.id).then((data) => {\r\n      order.value = data.order\r\n      isLoading.value = false\r\n    })\r\n\r\n    // 前往付款\r\n    const router = useRouter()\r\n    const handlerPayment = () => {\r\n      isLoading.value = true\r\n      payOrder(route.params.id).then(() => {\r\n        router.push(`/checkout/result/${route.params.id}`)\r\n        isLoading.value = false\r\n      })\r\n    }\r\n\r\n    return {\r\n      isLoading,\r\n      order,\r\n      handlerPayment\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.bg-img {\r\n  width: 80px;\r\n  height: 80px;\r\n  background-size: cover;\r\n  background-position: center center;\r\n  background-repeat: no-repeat;\r\n  overflow: hidden;\r\n}\r\n</style>\r\n","import { render } from \"./PayOrder.vue?vue&type=template&id=26688299&scoped=true\"\nimport script from \"./PayOrder.vue?vue&type=script&lang=js\"\nexport * from \"./PayOrder.vue?vue&type=script&lang=js\"\n\nimport \"./PayOrder.vue?vue&type=style&index=0&id=26688299&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\小羊\\\\Desktop\\\\igo-shop\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-26688299\"]])\n\nexport default __exports__","import request from '@/utils/request'\r\nconst path = `${process.env.VUE_APP_PATH}`\r\n\r\n// 前台 API\r\n/**\r\n * 建立訂單\r\n * @param {Object} order - 訂單資料表單\r\n * @returns Promise\r\n */\r\nexport const createOrder = (order) => {\r\n  return request(`/api/${path}/order`, 'post', { data: order })\r\n}\r\n\r\n/**\r\n * 根據 ID 查詢訂單\r\n * @param {String} orderId - 訂單ID\r\n * @returns Promise\r\n */\r\nexport const getOrderById = (orderId) => {\r\n  return request(`/api/${path}/order/${orderId}`, 'get')\r\n}\r\n\r\n/**\r\n * 付款\r\n * @param {String} orderId - 訂單ID\r\n * @returns Promise\r\n */\r\nexport const payOrder = (orderId) => {\r\n  return request(`/api/${path}/pay/${orderId}`, 'post')\r\n}\r\n\r\n// 後台 API\r\n/**\r\n * 取得後台訂單列表\r\n * @param {Integer} page - 當前頁碼\r\n * @returns Promise\r\n */\r\nexport const getOrdersList = (page = 1) => {\r\n  return request(`/api/${path}/admin/orders?page=${page}`, 'get')\r\n}\r\n\r\n/**\r\n * 修改訂單資訊 (付費狀態、訂購人資訊)\r\n * @param {Object} order - tempOrder\r\n * @returns Promise\r\n */\r\nexport const updateOrder = (order) => {\r\n  return request(`/api/${path}/admin/order/${order.id}`, 'put', { data: order })\r\n}\r\n\r\n/**\r\n * 刪除一筆訂單\r\n * @param {String} id - 訂單ID\r\n * @returns Promise\r\n */\r\nexport const deleteOrder = (id) => {\r\n  return request(`/api/${path}/admin/order/${id}`, 'delete')\r\n}\r\n\r\n/**\r\n * 刪除所有訂單\r\n * @returns Promise\r\n */\r\nexport const clearOrder = () => {\r\n  return request(`/api/${path}/admin/orders/all`, 'delete')\r\n}\r\n"],"sourceRoot":""}